<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="http," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Web浏览器、服务器和相关的Web程序都是通过HTTP相互通信的。 本章主要描述了Web的基础构建与HTTP的核心技术，并使用Python的requests库作为实验的工具。 HTTP简介HTTP使用的是可靠的数据传输协议，它能够保证数据在传输过程中不会被损坏或产生混乱。浏览一个页面时，HTTP客户端(浏览器)发送一个HTTP请求到服务器，服务器在它所存储的内容中去寻找所期望的对象(资源)，如果成">
<meta name="keywords" content="http">
<meta property="og:type" content="article">
<meta property="og:title" content="Http简介">
<meta property="og:url" content="https://dangod.github.io/2017/04/08/HTTP简介/index.html">
<meta property="og:site_name" content="阿蛋的blog">
<meta property="og:description" content="Web浏览器、服务器和相关的Web程序都是通过HTTP相互通信的。 本章主要描述了Web的基础构建与HTTP的核心技术，并使用Python的requests库作为实验的工具。 HTTP简介HTTP使用的是可靠的数据传输协议，它能够保证数据在传输过程中不会被损坏或产生混乱。浏览一个页面时，HTTP客户端(浏览器)发送一个HTTP请求到服务器，服务器在它所存储的内容中去寻找所期望的对象(资源)，如果成">
<meta property="og:updated_time" content="2017-04-10T08:20:22.290Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Http简介">
<meta name="twitter:description" content="Web浏览器、服务器和相关的Web程序都是通过HTTP相互通信的。 本章主要描述了Web的基础构建与HTTP的核心技术，并使用Python的requests库作为实验的工具。 HTTP简介HTTP使用的是可靠的数据传输协议，它能够保证数据在传输过程中不会被损坏或产生混乱。浏览一个页面时，HTTP客户端(浏览器)发送一个HTTP请求到服务器，服务器在它所存储的内容中去寻找所期望的对象(资源)，如果成">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://dangod.github.io/2017/04/08/HTTP简介/"/>





  <title> Http简介 | 阿蛋的blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">阿蛋的blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">高等游民</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://dangod.github.io/2017/04/08/HTTP简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿蛋">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿蛋的blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Http简介
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-08T00:00:00+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/http协议/" itemprop="url" rel="index">
                    <span itemprop="name">http协议</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Web浏览器、服务器和相关的Web程序都是通过HTTP相互通信的。</p>
<p>本章主要描述了Web的基础构建与HTTP的核心技术，并使用Python的requests库作为实验的工具。</p>
<h2 id="HTTP简介"><a href="#HTTP简介" class="headerlink" title="HTTP简介"></a>HTTP简介</h2><p>HTTP使用的是可靠的数据传输协议，它能够保证数据在传输过程中不会被损坏或产生混乱。浏览一个页面时，HTTP客户端(浏览器)发送一个HTTP请求到服务器，服务器在它所存储的内容中去寻找所期望的对象(资源)，如果成功，就将<strong>对象、对象类型、对象长度以及其他一些信息</strong>放在<strong>HTTP响应</strong>中发送给客户端。</p>
<ul>
<li>Web资源：Web服务器是Web资源的宿主。最简单的Web资源就是服务器中保存的静态文件：包括视频文件、文本文件等等。资源还可以是根据需要动态生成内容的软件程序。总之，所有类型的内容来源都是资源。</li>
<li>客户端是通过URL来访问资源的，URL描述了一台特定服务器上某资源的特定位置。它们可以明确说明如何从一个精确、固定的位置获取资源。URL都有一种标准格式如下：方案(说明了访问资源所使用的协议类型，这部分通常就是HTTP协议(<a href="http://))+因特网地址(www.cc98.org)+服务器上具体资源位置(/specials/a.gif)。" target="_blank" rel="external">http://))+因特网地址(www.cc98.org)+服务器上具体资源位置(/specials/a.gif)。</a>)</li>
<li><p>无状态：HTTP协议是无状态的，即每一个请求/响应周期与前一个都是相互独立的。HTTP协议下，服务器不需要在各次请求之间保留状态信息，好处就是如果一次请求出现了问题，系统不需要做任何的清理。坏处就是，大部分的网络应用都是要求有状态的，开发人员必须通过其他方式来实现有状态，主要是session、cookie以及AJAX。</p>
</li>
<li><p>对象类型(媒体类型)：HTTP会为所有的对HTTP象都附加一个<strong>MIME类型</strong>的数据格式标签。MIME类型是一种文本标记，表示一种主要的对象类型和一个特定的子类型，中间由一条斜杠来分隔，比如HTML格式的文本文档由<code>text/html</code>类型来标记，普通的ASSCII文本文档由<code>text/plain</code>类型来标记，gif格式的图片由<code>image/gif</code>类型来标记等。</p>
</li>
<li>Web事务：一个HTTP事务由一条<strong>请求命令</strong>(从客户端发发往服务器)和一个<strong>响应结果</strong>(从服务器发回客户端)组成。这种通信是通过名为<strong>HTTP报文的格式化数据块</strong>进行的。<ul>
<li>HTTP支持几种不同的请求命令，这些命令称为<strong>HTTP方法(HTTP method)</strong>，每条HTTP 请求报文都包含一个方法，这个方法会告诉服务器要执行什么动作，5种常见的HTTP方法，GET、PUT、DELETE、POST、HEAD。</li>
<li>每条HTTP响应报文返回时都会携带一个状态码，状态码是一个三位数字，告知客户端请求是否成功，或者是否需要采取其他动作，常见的状态码有：200、302、404。</li>
<li>HTTP报文：Web客户端发往服务器的HTTP报文称为<strong>请求报文</strong>，从服务器发往客户端的报文称为<strong>响应报文</strong>。HTTP报文包括三部分：<ul>
<li>起始行，在请求报文中用来说明要做些什么，在响应报文中说明出现了什么情况。</li>
<li>首部字段，起始行后面有零个或多个首部字段，每个首部字段都包含一个名字和一个值，为了便于解析两者之间用冒号来分隔。首部以一个空行结束。</li>
<li>主体，空行之后就是课选的报文主体了，其中包含了所有类型的数据。请求主体中包括了要发送给Web服务器的数据；响应主体中装填了要返回给客户端的数据。</li>
</ul>
</li>
</ul>
</li>
<li>连接：HTTP只是个应用层协议，联网传输数据的细节由TCP/IP提供。在HTTP客户端向服务器发送报文之前，需要用网际协议(Internet Protocol, IP)地址和端口号在客户端和服务器之间建立一条TCP/IP连接。</li>
<li>一些重要的Web的结构组件：<ul>
<li>代理：位于客户端和服务器之间的HTTP中间实体。</li>
<li>缓存：HTTP的仓库，使常用页面的副本可以保存在离客户端更近的地方。</li>
<li>网关：链接其他应用程序的特殊Web服务器。</li>
<li>隧道：对HTTP通信报文进行盲转发的特殊代理。</li>
<li>Agent代理：发起自动HTTP请求的半智能Web客户端。</li>
</ul>
</li>
</ul>
<p>接下来详细介绍几个比较重要的概念。</p>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a><a href="#URL" title="URL"></a>URL</h3><p>服务器资源名被称为统一资源标识符(URI)，它有两种格式：</p>
<ul>
<li>URL：通过描述资源的位置来标识资源。</li>
<li>URN：通过名字来识别资源，与资源当前所处位置无关。</li>
</ul>
<p>HTTP规范将更通用的概念URI作为其资源标识符，但实际上，目前HTTP应用程序处理的只是URI的自己URL，当前技术背景下所说的URI基本上都代表URL。</p>
<h4 id="URL语法"><a href="#URL语法" class="headerlink" title="URL语法"></a><a href="#URL语法" title="URL语法"></a>URL语法</h4><p>大多数URL方案的URL语法都建立在这个通用格式之上：<br><code>&lt;scheme&gt;://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;frag&gt;</code>。但几乎没有哪个URL包含了所有这些组件，URL最重要的3个部分是<strong>方案(scheme)</strong>，<strong>主机(host)</strong>和<strong>路径(path)</strong>。</p>
<p>URL(“方案://服务器位置/路径”)分为三部分：</p>
<ul>
<li>URL的第一部分(http)是URL方案(scheme)，方案可以告知Web客户端怎样访问资源。方案有很多种，比如<code>http://</code>开头表示使用HTTP协议访问，<code>ftp://</code>开头表示使用FTP协议访问资源。</li>
<li>URL的第二部分(<code>www.example.com</code>)是指服务器的位置。</li>
<li>URL的第三部分(<code>/example/example.png</code>)是指资源路径，路径说明了请求的是服务器上哪个特定的本地资源。</li>
</ul>
<h4 id="URL快捷方式"><a href="#URL快捷方式" class="headerlink" title="URL快捷方式"></a><a href="#URL快捷方式" title="URL快捷方式"></a>URL快捷方式</h4><p>URL客户端可以理解并使用几种URL快捷方式。</p>
<ul>
<li><p>绝对和相对URL：绝对URL比较简单，这里就不多说明了。重点是<strong>相对URL</strong>，它是不完整的，要从相对URL总获取访问资源所需的全部信息，就必须相对于另一个被称为<strong>基础URL</strong>进行解析。</p>
<p>基础URL一般来自于几个不同的地方：</p>
<ul>
<li>在资源中显式提供，比如HTML文件中用<code>&lt;base&gt;</code>标记定义一个基础URL。</li>
<li>封装资源的基础URL，如果在一个没有显式指定基础URL的资源中发现了一个相对URL，可以将它所属资源的URL作为基础。</li>
<li>没有基础URL，某些情况下，没有基础URL，意味着可能是出错了。</li>
</ul>
<p>举个栗子：</p>
<p>相对URL：<code>/a.gif</code>，其基础URL是<code>http://www.example.com/images</code>，则真正解析出来的URL是<code>http://www.example.com/images/a.gif</code>。</p>
</li>
<li><p>自动扩展URL：很多浏览器都会在用户输入URL的时候尝试自动扩展URL，这样用户就只需要输入URL中的关键字，浏览器会自动补全URL。这些自动扩展特性有以下两种方式：</p>
<ul>
<li>主机名扩展：只要有些关键字，浏览器通常即可以将你输入的主机名扩展为完整的主机名。比如你在地址栏输入<code>google</code>，浏览器会自动插入<code>www.和.com</code>，构建出<code>www.google.com</code>。</li>
<li>历史扩展：浏览器会将用户以前访问过的URL历史存储起来，当你输入URL时，它就可以将你输入的URL与历史记录中的URL前缀进行匹配，并提供一些完整的选项供你选择。</li>
</ul>
</li>
</ul>
<h3 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a><a href="#HTTP报文" title="HTTP报文"></a>HTTP报文</h3><p>HTTP报文是在HTTP应用程序之间发送的数据块，这些数据以一些文本形式的元信息开头，这些信息详细的描述了报文的内容以及含义，后面跟着可选的数据部分。</p>
<h4 id="报文的组成"><a href="#报文的组成" class="headerlink" title="报文的组成"></a><a href="#报文的组成" title="报文的组成"></a>报文的组成</h4><p>HTTP报文是简单的格式化数据块，由三个部分组成：</p>
<ul>
<li><p>对报文进行描述的起始行(start line)：请求报文的起始行包含一个方法和一个请求URL；响应报文的起始行包含HTTP版本、状态码以及原因短语。</p>
</li>
<li><p>包含属性的首部(header)：HTTP首部字段向请求和响应报文中添加了一些附加信息，本质上来说，它们只是一些名/值对列表。</p>
</li>
</ul>
<p>首部分为以下几类：</p>
<ul>
<li>通用首部：可以用在请求报文或者响应报文中，提供一些通用功能，比如提供报文构建时间和日期的Date首部：<code>Date: Tue 3 Oct 1999 02:33:34 GMT</code></li>
<li>请求首部：请求报文特有，为服务器提供一些额外信息，比如客户端希望接收什么类型的数据。</li>
<li>响应首部：响应报文特有，为客户端提供信息，比如客户端与哪种类型的服务器进行交互。</li>
<li>实体首部：描述主体的长度和内容，或者就是资源本身。</li>
<li><p>扩展首部：规范中没有定义的新首部，由应用程序开发者创建。</p>
</li>
<li><p>可选的、包含数据的主体(body)部分；</p>
</li>
</ul>
<p>起始行和首部就是由行分隔的ASCII文本，每行都以一个由两个字符组成的行终止序列作为结束，其中包括一个回车符(ASCII码13)和一个换行符(ASCII码10)。这个行终止序列可以写作CRLF。</p>
<p>实体的主体或报文的主体是一个可选的数据块，与起始行和首部不同的是，主体中可以包含文本或二进制数据，也可以为空。</p>
<h4 id="报文的语法"><a href="#报文的语法" class="headerlink" title="报文的语法"></a><a href="#报文的语法" title="报文的语法"></a>报文的语法</h4><p>HTTP报文分为两类：</p>
<ul>
<li>请求报文(request message)，向Web服务器请求一个动作，格式如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;method&gt;&lt;request-URL&gt;&lt;version&gt;</div><div class="line">&lt;headers&gt;</div><div class="line">&lt;entity-body&gt;</div></pre></td></tr></table></figure>
<ul>
<li>响应报文(response message)，将请求的结果返回给客户端，格式如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;version&gt;&lt;status&gt;&lt;reason-phrass&gt;</div><div class="line">&lt;headers&gt;</div><div class="line">&lt;entity-body&gt;</div></pre></td></tr></table></figure>
<p>以下是对个部分的简要描述：</p>
<ul>
<li>方法(method)：客户端希望服务器对资源执行的动作。常用HTTP方法如下：<ul>
<li>GET：是最常用的方法，通常用于从服务器获取一份资源，不包含主体。</li>
<li>HEAD：与GET方法类似，但HEAD只从服务器获取资源的首部，不包含主体。使用HEAD可以在不获取资源的情况下了解资源的类型等情况、通过查看响应中的状态码，判断某个资源是否存在、通过查看首部，测试资源是否被修改。</li>
<li>PUT：向服务器写入文档，包含主体。PUT方法的语义就是让服务器用请求的主体部分来创建一个由所请求的URL命名的新文档，或者那个URL已存在的话，用这个请求的主体来代替它。</li>
<li>POST：向服务器输入数据，通常用它来支持HTML表单。</li>
<li>TRACE：对可能经过代理服务器传送到服务器上去的报文进行追踪，不包含主体。客户端发起一个请求时，这个请求可能要穿过防火墙、代理、网关或一些其他应用程序。每个中间节点都可能修改原始的HTTP请求，TRACE请求会在目的服务器端发起一个”环回”诊断，行程最后一站的服务器会弹回一条TRACE响应，并在相应主体中携带它收到的原始请求报文，这样客户端就能够查看原始报文是否、以及如何被损坏或修改过。</li>
<li>OPTIONS：请求Web服务器告知其支持的各种功能，不包含主体，可以询问服务器通常支持哪些方法，或者对某些特殊资源支持哪些方法。</li>
<li>DELETE：请求服务器删除请求URL所指定的资源，但是客户端无法保证删除操作一定会被执行，因为HTTP规范允许服务器在不通知客户端的情况下撤销请求，不包含主体。</li>
</ul>
</li>
<li>请求URL(request-URL)：命名了请求的资源，或者URL路径组件的完整URL。</li>
<li>版本(version)：报文所使用的HTTP版本，基本格式是<code>HTTP/&lt;major&gt;.&lt;minor&gt;</code>，主要版本号和次要版本号都是整数。</li>
<li>状态码(status-code)：这三位数字描述了请求过程中发生的情况。</li>
<li>原因短语(reason-phrase)：数字状态码的可读版本，包含行终止序列之前的所有文本。</li>
<li>首部(header)：包含一些对资源格式的说明。</li>
<li>实体的主体部分(entity-body)：包含一个由任一数据组成的数据块，也可以为空。</li>
</ul>
<h3 id="有状态的Web应用"><a href="#有状态的Web应用" class="headerlink" title="有状态的Web应用"></a><a href="#有状态的Web应用" title="有状态的Web应用"></a>有状态的Web应用</h3><p>HTTP协议是无状态的，也就是说，在客户端的各次请求之间，服务器是不会保留状态信息的。每一次请求都被认为是全新的请求。实现有状态的Web应用大致上有以下几种方式：</p>
<ul>
<li>session：人为的在客户端和服务器之间传递会话id。具体做法就是：服务器在发送响应数据给客户端的时候带一个唯一的令牌(token)，随后不论何时客户端向服务器发起请求的时候都把这个令牌附加在后面，让服务器能够辨识这个客户端。在 web 开发领域我们把这个来回传递的令牌叫做会话标识符（session identifier）。</li>
<li>cookies：cookie就是在一个请求/响应周期内，服务器发送给客户端并存储在客户端的一段数据。当你第一次访问一个网站的时候，服务器会给你发送会话信息并将其存储在你本地电脑浏览器的 cookie 里。要注意的是真正的会话数据是存在服务器上的。在客户端发起每一个请求的时候，服务器就会比对客户端的 cookie 和服务器上的会话数据，用来标识当前的会话。通过这种方法，当你再次访问同一个网站的时候，服务器就会通过 cookie 和里面的信息来认出你的会话。</li>
<li>AJAX：主要特点就是允许浏览器发送请求和处理响应的时候不用刷新整个页面。这些请求的响应会通过一些回调来处理。你可以这样理解回调，就是你把一些逻辑存放在某个函数里，当某个条件被触发之后再回来执行你前面存放的逻辑。AJAX 请求就像是普通请求：发送到服务器的请求依然跟普通请求一样有着一个 HTTP 请求该有的所有组成部分，并且服务器处理 AJAX 请求的方法跟处理普通请求也是一样的。唯一不同就是，不是通过浏览器刷新来处理响应，而通常由客户端的一些javascript代码来处理。</li>
</ul>
<h3 id="使用requests模拟HTTP"><a href="#使用requests模拟HTTP" class="headerlink" title="使用requests模拟HTTP"></a>使用requests模拟HTTP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">C:\Users\amber&gt;python</div><div class="line">Python 3.5.1 (v3.5.1:37a07cee5969, Dec  6 2015, 01:54:25) [MSC v.1900 64 bit (AMD64)] on win32</div><div class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</div><div class="line"># 导入requests</div><div class="line">&gt;&gt;&gt; import requests</div><div class="line"># 向百度首页发送get请求，其他请求方法的格式与此语句一致，只需要把get改成其他方法的名称即可，比如r=requests.post(...)。</div><div class="line">&gt;&gt;&gt; r = requests.get(&quot;https://www.baidu.com&quot;)</div><div class="line"># 现在，我们有一个名为 r 的 Response 对象。我们可以从这个对象中获取所有我们想要的信息。</div><div class="line"># 比如我们想要读取服务器相应的内容，在这里返回的是百度首页的html</div><div class="line">&gt;&gt;&gt;r.text</div><div class="line">&apos;&lt;!DOCTYPE html&gt;\r\n&lt;!--STATUS OK--&gt;&lt;html&gt;...&lt;/html&gt;\r\n&apos;</div><div class="line"># 查看requests使用了什么编码</div><div class="line">&gt;&gt;&gt; r.encoding</div><div class="line">&apos;ISO-8859-1&apos;</div><div class="line"># 也能以字节的方式访问请求响应体，看到返回的值是以b&apos;&apos;包裹的，表示二进制的形式</div><div class="line">&gt;&gt;&gt; r.content</div><div class="line">b&apos;&lt;!DOCTYPE html&gt;\r\n&lt;!--STATUS OK--&gt;&lt;html&gt;...&lt;/html&gt;\r\n&apos;</div><div class="line"># 也可以检测响应状态码</div><div class="line">&gt;&gt;&gt; r.status_code</div><div class="line">200</div><div class="line"># 也可以查看一个以Python字典形式展示的服务器响应头</div><div class="line">&gt;&gt;&gt; r.headers</div><div class="line">&#123;&apos;Content-Type&apos;: &apos;text/html&apos;,</div><div class="line"> &apos;Server&apos;: &apos;bfe/1.0.8.14&apos;,</div><div class="line"> &apos;Content-Encoding&apos;: &apos;gzip&apos;,</div><div class="line"> &apos;Last-Modified&apos;: &apos;Mon, 25 Jul 2016 11:13:20 GMT&apos;,</div><div class="line"> &apos;Transfer-Encoding&apos;: &apos;chunked&apos;,</div><div class="line"> &apos;Date&apos;: &apos;Tue, 06 Sep 2016 03:34:33 GMT&apos;,</div><div class="line"> &apos;Connection&apos;: &apos;keep-alive&apos;,</div><div class="line"> &apos;Set-Cookie&apos;:&apos;__bsi=13338092233546665715_00_119_N_N_2_0303_C02F_N_N_N_0; expires=Tue, 06-Sep-16 03:34:38 GMT; domain=www.baidu.com; path=/&apos;,</div><div class="line"> &apos;Cache-Control&apos;: &apos;private, no-cache, no-store, proxy-revalidate, no-transform&apos;,</div><div class="line"> &apos;Pragma&apos;: &apos;no-cache&apos;&#125;</div><div class="line"># 我们可以访问这些响应头字段</div><div class="line">&gt;&gt;&gt; r.headers.get(&apos;content-type&apos;)</div><div class="line">&apos;text/html&apos;</div><div class="line"># 有些网页为了反爬虫，直接用requests进行http请求是会被拒绝的，我们可以为请求添加HTTP头部，伪装成浏览器进行访问，只需要传递一个dict给headers参数就行了</div><div class="line"># 比如访问知乎，不伪装成浏览器，访问会被拒绝</div><div class="line">&gt;&gt;&gt; r = requests.get(&quot;https://www.zhihu.com&quot;)</div><div class="line">&gt;&gt;&gt; r.text</div><div class="line">&apos;&lt;html&gt;&lt;body&gt;&lt;h1&gt;500 Server Error&lt;/h1&gt;\nAn internal server error occured.\n&lt;/body&gt;&lt;/html&gt;\n&apos;</div><div class="line">&gt;&gt;&gt; r = requests.get(&quot;https://www.zhihu.com&quot;)</div><div class="line">&gt;&gt;&gt; r.text</div><div class="line">&apos;&lt;html&gt;&lt;body&gt;&lt;h1&gt;500 Server Error&lt;/h1&gt;\nAn internal server error occured.\n&lt;/body&gt;&lt;/html&gt;\n&apos;</div><div class="line">&gt;&gt;&gt; r.status_code</div><div class="line">500</div><div class="line">&gt;&gt;&gt; url = &quot;https://www.zhihu.com&quot;</div><div class="line">&gt;&gt;&gt; headers = &#123;&apos;user-agent&apos;:&apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36&apos;&#125;</div><div class="line">&gt;&gt;&gt; r = requests.get(url, headers=headers)</div><div class="line"># 使用了请求头以后访问不会被拒绝</div><div class="line">&gt;&gt;&gt; r.text</div><div class="line">&apos;&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;zh-CN&quot; class=&quot;&quot;&gt;...&lt;/html&gt;&apos;</div><div class="line"># 默认情况下，除了 HEAD, Requests 会自动处理所有重定向。可以使用响应对象的 history 方法来追踪重定向。Response.history 是一个 Response 对象的列表，为了完成请求而创建了这些对象。这个对象列表按照从最老到最近的请求进行排序。</div><div class="line"># 例如，Github 将所有的 HTTP 请求重定向到 HTTPS：</div><div class="line">&gt;&gt;&gt; r = requests.get(&apos;http://github.com&apos;)</div><div class="line">&gt;&gt;&gt; r.url</div><div class="line">&apos;https://github.com/&apos;</div><div class="line">&gt;&gt;&gt; r.status_code</div><div class="line">200</div><div class="line">&gt;&gt;&gt; r.history</div><div class="line">[&lt;Response [301]&gt;]</div><div class="line"># 如果你使用的是GET、OPTIONS、POST、PUT、PATCH 或者 DELETE，那么你可以通过 allow_redirects 参数禁用重定向处理：</div><div class="line">&gt;&gt;&gt; r = requests.get(&apos;http://github.com&apos;, allow_redirects=False)</div><div class="line">&gt;&gt;&gt; r.status_code</div><div class="line">301</div><div class="line">&gt;&gt;&gt; r.history</div><div class="line">[]</div><div class="line"># 如果你使用了 HEAD，你也可以启用重定向：</div><div class="line">&gt;&gt;&gt; r = requests.head(&apos;http://github.com&apos;, allow_redirects=True)</div><div class="line">&gt;&gt;&gt; r.url</div><div class="line">&apos;https://github.com/&apos;</div><div class="line">&gt;&gt;&gt; r.history</div><div class="line">[&lt;Response [301]&gt;]</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/http/" rel="tag"># http</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/10/自动获取文件里IP的shell脚本/" rel="next" title="自动获取文件里IP的shell脚本">
                <i class="fa fa-chevron-left"></i> 自动获取文件里IP的shell脚本
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/06/centos分配IP脚本/" rel="prev" title="centos分配IP脚本">
                centos分配IP脚本 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="阿蛋" />
          <p class="site-author-name" itemprop="name">阿蛋</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP简介"><span class="nav-number">1.</span> <span class="nav-text">HTTP简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#URL"><span class="nav-number">1.1.</span> <span class="nav-text">URL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#URL语法"><span class="nav-number">1.1.1.</span> <span class="nav-text">URL语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#URL快捷方式"><span class="nav-number">1.1.2.</span> <span class="nav-text">URL快捷方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP报文"><span class="nav-number">1.2.</span> <span class="nav-text">HTTP报文</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#报文的组成"><span class="nav-number">1.2.1.</span> <span class="nav-text">报文的组成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#报文的语法"><span class="nav-number">1.2.2.</span> <span class="nav-text">报文的语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有状态的Web应用"><span class="nav-number">1.3.</span> <span class="nav-text">有状态的Web应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用requests模拟HTTP"><span class="nav-number">1.4.</span> <span class="nav-text">使用requests模拟HTTP</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿蛋</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
